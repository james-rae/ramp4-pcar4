{"version":3,"file":"featuresetbase-Bq-ZKkVv.js","sources":["../../node_modules/@arcgis/core/arcade/functions/featuresetbase.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport{ArcadeDate as e}from\"../ArcadeDate.js\";import t from\"../ArcadePortal.js\";import n from\"../Dictionary.js\";import{ArcadeExecutionError as a,ExecutionErrorCodes as i}from\"../executionError.js\";import r from\"../Feature.js\";import{convertToFeatureSet as s,constructFeatureSetFromPortalItem as o,constructFeatureSet as l,constructFeatureSetFromRelationship as f,constructFeatureSetFromUrl as u,constructAssociationMetaDataFeatureSetFromUrl as d}from\"../featureSetUtils.js\";import c from\"../ImmutableArray.js\";import{H as m,n as p,m as y,u as w,c as h,j as g,l as F,N as I,k as D,s as T,K as b,h as E,o as A,r as N,q as x,i as L,g as S,a1 as C,T as $,O as v}from\"../../chunks/languageUtils.js\";import{getPortal as P}from\"../portalUtils.js\";import{SqlExpressionAdapted as j,StringToCodeAdapted as U,FieldRename as Z,AdaptedFeatureSet as M,OriginalField as R}from\"../featureset/actions/Adapted.js\";import k from\"../featureset/actions/AttributeFilter.js\";import O from\"../featureset/actions/OrderBy.js\";import z from\"../featureset/actions/Top.js\";import H from\"../featureset/sources/Empty.js\";import W from\"../featureset/sources/FeatureLayerMemory.js\";import G from\"../featureset/support/OrderbyClause.js\";import{cloneField as _}from\"../featureset/support/shared.js\";import{isSingleField as K}from\"../featureset/support/sqlUtils.js\";import{calculateStat as q}from\"./fieldStats.js\";import{isPromiseLike as B}from\"../../core/promiseUtils.js\";import{WhereClause as V}from\"../../core/sql/WhereClause.js\";import Q from\"../../layers/FeatureLayer.js\";import J from\"../../layers/support/Field.js\";import Y from\"../../portal/Portal.js\";function X(e){if(1===e.length){if(A(e[0]))return q(\"distinct\",e[0],-1);if(x(e[0]))return q(\"distinct\",e[0].toArray(),-1)}return q(\"distinct\",e,-1)}async function ee(e,t,n){const a=e.getVariables();if(a.length>0){const i=[];for(let e=0;e<a.length;e++){const r={name:a[e]};i.push(await t.evaluateIdentifier(n,r))}const r={};for(let e=0;e<a.length;e++)r[a[e]]=i[e];return e.parameters=r,e}return e}function te(e,t,n=null){for(const a in e)if(a.toLowerCase()===t.toLowerCase())return e[a];return n}function ne(e){if(null===e)return null;const t={type:te(e,\"type\",\"\"),name:te(e,\"name\",\"\")};if(\"range\"===t.type)t.range=te(e,\"range\",[]);else{t.codedValues=[];for(const n of te(e,\"codedValues\",[]))t.codedValues.push({name:te(n,\"name\",\"\"),code:te(n,\"code\",null)})}return t}function ae(e){if(null===e)return null;const t={},n=te(e,\"wkt\");null!==n&&(t.wkt=n);const a=te(e,\"wkid\");return null!==a&&(t.wkid=a),t}function ie(e){if(null===e)return null;const t={hasZ:te(e,\"hasz\",!1),hasM:te(e,\"hasm\",!1)},n=te(e,\"spatialreference\");null!=n&&(t.spatialReference=ae(n));const a=te(e,\"x\",null);if(null!==a)return t.x=a,t.y=te(e,\"y\",null),t.hasZ&&(t.z=te(e,\"z\",null)),t.hasM&&(t.m=te(e,\"m\",null)),t;const i=te(e,\"rings\",null);if(null!==i)return t.rings=i,t;const r=te(e,\"paths\",null);if(null!==r)return t.paths=r,t;const s=te(e,\"points\",null);if(null!==s)return t.points=s,t;for(const o of[\"xmin\",\"xmax\",\"ymin\",\"ymax\",\"zmin\",\"zmax\",\"mmin\",\"mmax\"]){const n=te(e,o,null);null!==n&&(t[o]=n)}return t}function re(e,t){for(const n of t)if(n===e)return!0;return!1}function se(e){return!!e.layerDefinition&&(!!e.featureSet&&(!1!==re(e.layerDefinition.geometryType,[\"\",null,\"esriGeometryNull\",\"esriGeometryPoint\",\"esriGeometryPolyline\",\"esriGeometryPolygon\",\"esriGeometryMultipoint\",\"esriGeometryEnvelope\"])&&(!1!==A(e.layerDefinition.fields)&&!1!==A(e.featureSet.features))))}function oe(e){return\"utc\"===e?.toLowerCase()?\"UTC\":\"unknown\"===e?.toLowerCase()?\"Unknown\":e}function le(q){\"async\"===q.mode&&(q.functions.timezone=function(t,r){return q.standardFunctionAsync(t,r,(async(s,o,l)=>{if(m(l,1,2,t,r),p(l[0]))return\"Unknown\";if(y(l[0]))return\"Unknown\";if(w(l[0])){if(await l[0].load(),1===l.length||null===l[1])return l[0].datesInUnknownTimezone?oe(\"unknown\"):oe(l[0].dateFieldsTimeZone);if(!(l[1]instanceof n)||!1===l[1].hasField(\"type\"))throw new a(t,i.InvalidParameter,r);const e=l[1].field(\"type\");if(!1===h(e))throw new a(t,i.InvalidParameter,r);switch(g(e).toLowerCase()){case\"preferredtimezone\":return oe(l[0].preferredTimeZone);case\"editfieldsinfo\":return oe(l[0].editFieldsInfo?.timeZone??null);case\"timeinfo\":return oe(l[0].timeInfo?.timeZone??null);case\"field\":if(l[1].hasField(\"fieldname\")&&h(l[1].field(\"fieldname\")))return oe(l[0].fieldTimeZone(g(l[1].field(\"fieldname\"))))}throw new a(t,i.InvalidParameter,r)}const f=F(l[0],I(t));if(null===f)return null;const u=f.timeZone;return\"system\"===u?e.systemTimeZoneCanonicalName:\"utc\"===u.toLowerCase()?\"UTC\":\"unknown\"===u.toLowerCase()?\"Unknown\":u}))},q.functions.sqltimestamp=function(e,t){return q.standardFunctionAsync(e,t,(async(n,r,s)=>{m(s,1,3,e,t);const o=s[0];if(D(o)){if(1===s.length)return o.toSQLWithKeyword();if(2===s.length)return o.changeTimeZone(g(s[1])).toSQLWithKeyword();throw new a(e,i.InvalidParameter,t)}if(y(o))return o.toSQLWithKeyword();if(w(o)){if(3!==s.length)throw new a(e,i.InvalidParameter,t);await o.load();const n=g(s[1]);if(y(s[2]))return s[2].toSQLWithKeyword();if(!1===D(s[2]))throw new a(e,i.InvalidParameter,t);const r=o.fieldTimeZone(n);return null===r?s[2].toSQLWithKeyword():s[2].changeTimeZone(r).toSQLWithKeyword()}throw new a(e,i.InvalidParameter,t)}))},q.signatures.push({name:\"sqltimestamp\",min:2,max:4}),q.functions.featuresetbyid=function(e,t){return q.standardFunctionAsync(e,t,((n,r,s)=>{if(m(s,2,4,e,t),T(s[0])){const n=g(s[1]);let r=b(s[2],null);const o=E(b(s[3],!0));if(null===r&&(r=[\"*\"]),!1===A(r))throw new a(e,i.InvalidParameter,t);return s[0].featureSetById(n,o,r)}throw new a(e,i.InvalidParameter,t)}))},q.signatures.push({name:\"featuresetbyid\",min:2,max:4}),q.functions.getfeatureset=function(e,t){return q.standardFunctionAsync(e,t,(async(n,r,o)=>{if(m(o,1,2,e,t),N(o[0])){let t=b(o[1],\"datasource\");return null===t&&(t=\"datasource\"),t=g(t).toLowerCase(),s(o[0].fullSchema(),t,e.lrucache,e.interceptor,e.spatialReference??null)}throw new a(e,i.InvalidParameter,t)}))},q.signatures.push({name:\"getfeatureset\",min:1,max:2}),q.functions.featuresetbyportalitem=function(e,n){return q.standardFunctionAsync(e,n,((r,s,l)=>{if(m(l,2,5,e,n),null===l[0])throw new a(e,i.PortalRequired,n);if(l[0]instanceof t){const t=g(l[1]),r=g(l[2]);let s=b(l[3],null);const f=E(b(l[4],!0));if(null===s&&(s=[\"*\"]),!1===A(s))throw new a(e,i.InvalidParameter,n);let u;return u=e.services?.portal?e.services.portal:Y.getDefault(),u=P(l[0],u),o(t,r,e.spatialReference??null,s,f,u,e.lrucache,e.interceptor)}if(!1===h(l[0]))throw new a(e,i.PortalRequired,n);const f=g(l[0]),u=g(l[1]);let d=b(l[2],null);const c=E(b(l[3],!0));if(null===d&&(d=[\"*\"]),!1===A(d))throw new a(e,i.InvalidParameter,n);return o(f,u,e.spatialReference??null,d,c,e.services?.portal??Y.getDefault(),e.lrucache,e.interceptor)}))},q.signatures.push({name:\"featuresetbyportalitem\",min:2,max:5}),q.functions.featuresetbyname=function(e,t){return q.standardFunctionAsync(e,t,((n,r,s)=>{if(m(s,2,4,e,t),T(s[0])){const n=g(s[1]);let r=b(s[2],null);const o=E(b(s[3],!0));if(null===r&&(r=[\"*\"]),!1===A(r))throw new a(e,i.InvalidParameter,t);return s[0].featureSetByName(n,o,r)}throw new a(e,i.InvalidParameter,t)}))},q.signatures.push({name:\"featuresetbyname\",min:2,max:4}),q.functions.featureset=function(e,t){return q.standardFunction(e,t,((r,s,o)=>{m(o,1,1,e,t);const l={layerDefinition:{geometryType:\"\",objectIdField:\"\",globalIdField:\"\",typeIdField:\"\",hasM:!1,hasZ:!1,fields:[]},featureSet:{geometryType:\"\",features:[]}};if(h(o[0])){const e=JSON.parse(o[0]);void 0!==e.layerDefinition?(l.layerDefinition=e.layerDefinition,l.featureSet=e.featureSet,e.layerDefinition.spatialReference&&(l.layerDefinition.spatialReference=e.layerDefinition.spatialReference)):(l.featureSet.features=e.features,l.featureSet.geometryType=e.geometryType,l.layerDefinition.geometryType=l.featureSet.geometryType,l.layerDefinition.objectIdField=e.objectIdFieldName??\"\",l.layerDefinition.typeIdField=e.typeIdFieldName,l.layerDefinition.globalIdField=e.globalIdFieldName,l.layerDefinition.fields=e.fields,e.spatialReference&&(l.layerDefinition.spatialReference=e.spatialReference))}else{if(!(o[0]instanceof n))throw new a(e,i.InvalidParameter,t);{const n=JSON.parse(o[0].castToText(!0)),r=te(n,\"layerdefinition\");if(null!==r){l.layerDefinition.geometryType=te(r,\"geometrytype\",\"\"),l.featureSet.geometryType=l.layerDefinition.geometryType,l.layerDefinition.globalIdField=te(r,\"globalidfield\",\"\"),l.layerDefinition.objectIdField=te(r,\"objectidfield\",\"\"),l.layerDefinition.typeIdField=te(r,\"typeidfield\",\"\"),l.layerDefinition.hasZ=!0===te(r,\"hasz\",!1),l.layerDefinition.hasM=!0===te(r,\"hasm\",!1);const e=te(r,\"spatialreference\");e&&(l.layerDefinition.spatialReference=ae(e));const t=[];for(const n of te(r,\"fields\",[])){const e={name:te(n,\"name\",\"\"),alias:te(n,\"alias\",\"\"),type:te(n,\"type\",\"\"),nullable:te(n,\"nullable\",!0),editable:te(n,\"editable\",!0),length:te(n,\"length\",null),domain:ne(te(n,\"domain\"))};t.push(e)}l.layerDefinition.fields=t;const a=te(n,\"featureset\");if(a){const e={};for(const n of t)e[n.name.toLowerCase()]=n.name;for(const t of te(a,\"features\",[])){const n={},a=te(t,\"attributes\",{});for(const t in a)n[e[t.toLowerCase()]]=a[t];l.featureSet.features.push({attributes:n,geometry:ie(te(t,\"geometry\"))})}}}else{l.layerDefinition.hasZ=!0===te(n,\"hasz\",!1),l.layerDefinition.hasM=!0===te(n,\"hasm\",!1),l.layerDefinition.geometryType=te(n,\"geometrytype\",\"\"),l.featureSet.geometryType=l.layerDefinition.geometryType,l.layerDefinition.objectIdField=te(n,\"objectidfieldname\",\"\"),l.layerDefinition.typeIdField=te(n,\"typeidfieldname\",\"\");const r=te(n,\"spatialreference\");r&&(l.layerDefinition.spatialReference=ae(r));const s=[],o=te(n,\"fields\",null);if(!A(o))throw new a(e,i.InvalidParameter,t);for(const e of o){const t={name:te(e,\"name\",\"\"),alias:te(e,\"alias\",\"\"),type:te(e,\"type\",\"\"),nullable:te(e,\"nullable\",!0),editable:te(e,\"editable\",!0),length:te(e,\"length\",null),domain:ne(te(e,\"domain\"))};s.push(t)}l.layerDefinition.fields=s;const f={};for(const e of s)f[e.name.toLowerCase()]=e.name;let u=te(n,\"features\",null);if(A(u))for(const e of u){const t={},n=te(e,\"attributes\",{});for(const e in n)t[f[e.toLowerCase()]]=n[e];l.featureSet.features.push({attributes:t,geometry:ie(te(e,\"geometry\",null))})}else u=null,l.featureSet.features=u}}}if(!1===se(l))throw new a(e,i.InvalidParameter,t);return l.layerDefinition.geometryType||(l.layerDefinition.geometryType=\"esriGeometryNull\"),W.create(l,e.spatialReference)}))},q.signatures.push({name:\"featureset\",min:1,max:1}),q.functions.filter=function(e,t){return q.standardFunctionAsync(e,t,(async(n,r,s)=>{if(m(s,2,2,e,t),A(s[0])||x(s[0])){const n=[];let r,o=s[0];if(o instanceof c&&(o=o.toArray()),!L(s[1]))throw new a(e,i.InvalidParameter,t);r=s[1].createFunction(e);for(const e of o){const t=r(e);B(t)?!0===await t&&n.push(e):!0===t&&n.push(e)}return n}if(w(s[0])){const t=await s[0].load(),n=V.create(s[1],t.getFieldsIndex(),t.dateFieldsTimeZoneDefaultUTC),a=n.getVariables();if(a.length>0){const t=[];for(let n=0;n<a.length;n++){const i={name:a[n]};t.push(await q.evaluateIdentifier(e,i))}const i={};for(let e=0;e<a.length;e++)i[a[e]]=t[e];return n.parameters=i,new k({parentfeatureset:s[0],whereclause:n})}return new k({parentfeatureset:s[0],whereclause:n})}throw new a(e,i.InvalidParameter,t)}))},q.signatures.push({name:\"filter\",min:2,max:2}),q.functions.orderby=function(e,t){return q.standardFunctionAsync(e,t,(async(n,r,s)=>{if(m(s,2,2,e,t),w(s[0])){const e=new G(s[1]);return new O({parentfeatureset:s[0],orderbyclause:e})}throw new a(e,i.InvalidParameter,t)}))},q.signatures.push({name:\"orderby\",min:2,max:2}),q.functions.top=function(e,t){return q.standardFunctionAsync(e,t,(async(n,r,s)=>{if(m(s,2,2,e,t),w(s[0]))return new z({parentfeatureset:s[0],topnum:s[1]});if(A(s[0]))return S(s[1])>=s[0].length?s[0].slice(0):s[0].slice(0,S(s[1]));if(x(s[0]))return S(s[1])>=s[0].length()?s[0].slice(0):s[0].slice(0,S(s[1]));throw new a(e,i.InvalidParameter,t)}))},q.signatures.push({name:\"top\",min:2,max:2}),q.functions.first=function(e,t){return q.standardFunctionAsync(e,t,(async(n,a,i)=>{if(m(i,1,1,e,t),w(i[0])){const t=await i[0].first(n.abortSignal);if(null!==t){const n=r.createFromGraphicLikeObject(t.geometry,t.attributes,i[0],e.timeZone);return n._underlyingGraphic=t,n}return t}return A(i[0])?0===i[0].length?null:i[0][0]:x(i[0])?0===i[0].length()?null:i[0].get(0):null}))},q.signatures.push({name:\"first\",min:1,max:1}),q.functions.attachments=function(e,t){return q.standardFunctionAsync(e,t,(async(r,s,o)=>{m(o,1,2,e,t);const f={minsize:-1,maxsize:-1,types:null,returnMetadata:!1};if(o.length>1)if(o[1]instanceof n){if(o[1].hasField(\"minsize\")&&(f.minsize=S(o[1].field(\"minsize\"))),o[1].hasField(\"metadata\")&&(f.returnMetadata=E(o[1].field(\"metadata\"))),o[1].hasField(\"maxsize\")&&(f.maxsize=S(o[1].field(\"maxsize\"))),o[1].hasField(\"types\")){const e=C(o[1].field(\"types\"),!1);e.length>0&&(f.types=e)}}else if(null!==o[1])throw new a(e,i.InvalidParameter,t);if(N(o[0])){let t=o[0]._layer;return t instanceof Q&&(t=l(t,e.spatialReference,[\"*\"],!0,e.lrucache,e.interceptor)),null===t?[]:!1===w(t)?[]:(await t.load(),t.queryAttachments(o[0].field(t.objectIdField),f.minsize,f.maxsize,f.types,f.returnMetadata))}if(null===o[0])return[];throw new a(e,i.InvalidParameter,t)}))},q.signatures.push({name:\"attachments\",min:1,max:2}),q.functions.featuresetbyrelationshipname=function(e,t){return q.standardFunctionAsync(e,t,(async(n,r,s)=>{m(s,2,4,e,t);const o=s[0],d=g(s[1]);let c=b(s[2],null);const p=E(b(s[3],!0));if(null===c&&(c=[\"*\"]),!1===A(c))throw new a(e,i.InvalidParameter,t);if(null===s[0])return null;if(!N(s[0]))throw new a(e,i.InvalidParameter,t);let y=o._layer;if(y instanceof Q&&(y=l(y,e.spatialReference,[\"*\"],!0,e.lrucache,e.interceptor)),null===y)return null;if(!1===w(y))return null;y=await y.load();const h=y.relationshipMetaData().filter((e=>e.name===d));if(0===h.length)return null;if(void 0!==h[0].relationshipTableId&&null!==h[0].relationshipTableId&&h[0].relationshipTableId>-1)return f(y,h[0],o.field(y.objectIdField),y.spatialReference,c,p,e.lrucache,e.interceptor);let F=y.serviceUrl();if(!F)return null;F=\"/\"===F.charAt(F.length-1)?F+h[0].relatedTableId.toString():F+\"/\"+h[0].relatedTableId.toString();const I=await u(F,y.spatialReference,c,p,e.lrucache,e.interceptor);await I.load();let D=I.relationshipMetaData();if(D=D.filter((e=>e.id===h[0].id)),!1===o.hasField(h[0].keyField)||null===o.field(h[0].keyField)){const e=await y.getFeatureByObjectId(o.field(y.objectIdField),[h[0].keyField]);if(e){const t=V.create(D[0].keyField+\"= @id\",I.getFieldsIndex(),I.dateFieldsTimeZoneDefaultUTC);return t.parameters={id:e.attributes[h[0].keyField]},I.filter(t)}return new H({parentfeatureset:I})}const T=V.create(D[0].keyField+\"= @id\",I.getFieldsIndex(),I.dateFieldsTimeZoneDefaultUTC);return T.parameters={id:o.field(h[0].keyField)},I.filter(T)}))},q.signatures.push({name:\"featuresetbyrelationshipname\",min:2,max:4}),q.functions.featuresetbyassociation=function(e,t){return q.standardFunctionAsync(e,t,(async(n,r,s)=>{m(s,2,3,e,t);const o=s[0],f=g(b(s[1],\"\")).toLowerCase(),u=h(s[2])?g(s[2]):null;if(null===s[0])return null;if(!N(s[0]))throw new a(e,i.InvalidParameter,t);let c=o._layer;if(c instanceof Q&&(c=l(c,e.spatialReference,[\"*\"],!0,e.lrucache,e.interceptor)),null===c)return null;if(!1===w(c))return null;await c.load();const p=c.serviceUrl(),y=await d(p,e.spatialReference);let F=null,I=null,D=!1;if(null!==u&&\"\"!==u&&void 0!==u){for(const e of y.terminals)e.terminalName===u&&(I=e.terminalId);null===I&&(D=!0)}const T=y.associations.getFieldsIndex(),E=T.get(\"TOGLOBALID\").name,A=T.get(\"FROMGLOBALID\").name,x=T.get(\"TOTERMINALID\").name,L=T.get(\"FROMTERMINALID\").name,S=T.get(\"FROMNETWORKSOURCEID\").name,C=T.get(\"TONETWORKSOURCEID\").name,v=T.get(\"ASSOCIATIONTYPE\").name,P=T.get(\"ISCONTENTVISIBLE\").name,k=T.get(\"OBJECTID\").name;for(const e of c.fields)if(\"global-id\"===e.type){F=o.field(e.name);break}let O=null,z=new j(new J({name:\"percentalong\",alias:\"percentalong\",type:\"double\"}),V.create(\"0\",y.associations.getFieldsIndex(),y.associations.dateFieldsTimeZoneDefaultUTC)),H=new j(new J({name:\"side\",alias:\"side\",type:\"string\"}),V.create(\"''\",y.associations.getFieldsIndex(),y.associations.dateFieldsTimeZoneDefaultUTC));const W=\"globalid\",G=\"globalId\",K={};for(const e in y.lkp)K[e]=y.lkp[e].sourceId;const q=new U(new J({name:\"classname\",alias:\"classname\",type:\"string\"}),null,K);let B=\"\";switch(f){case\"midspan\":{B=`((${E}='${F}') OR ( ${A}='${F}')) AND (${v} IN (5))`,q.codefield=V.create(`CASE WHEN (${E}='${F}') THEN ${S} ELSE ${C} END`,y.associations.getFieldsIndex(),y.associations.dateFieldsTimeZoneDefaultUTC);const e=_(M.findField(y.associations.fields,A));e.name=W,e.alias=W,O=new j(e,V.create(`CASE WHEN (${A}='${F}') THEN ${E} ELSE ${A} END`,y.associations.getFieldsIndex(),y.associations.dateFieldsTimeZoneDefaultUTC)),z=y.unVersion>=4?new R(M.findField(y.associations.fields,T.get(\"PERCENTALONG\").name)):new j(new J({name:\"percentalong\",alias:\"percentalong\",type:\"double\"}),V.create(\"0\",y.associations.getFieldsIndex(),y.associations.dateFieldsTimeZoneDefaultUTC));break}case\"junctionedge\":{B=`((${E}='${F}') OR ( ${A}='${F}')) AND (${v} IN (4,6))`,q.codefield=V.create(`CASE WHEN (${E}='${F}') THEN ${S} ELSE ${C} END`,y.associations.getFieldsIndex(),y.associations.dateFieldsTimeZoneDefaultUTC);const e=_(M.findField(y.associations.fields,A));e.name=W,e.alias=W,O=new j(e,V.create(`CASE WHEN (${A}='${F}') THEN ${E} ELSE ${A} END`,y.associations.getFieldsIndex(),y.associations.dateFieldsTimeZoneDefaultUTC)),H=new j(new J({name:\"side\",alias:\"side\",type:\"string\"}),V.create(`CASE WHEN (${v}=4) THEN 'from' ELSE 'to' END`,y.associations.getFieldsIndex(),y.associations.dateFieldsTimeZoneDefaultUTC));break}case\"connected\":{let e=`${E}='@T'`,t=`${A}='@T'`;null!==I&&(e+=` AND ${x}=@A`,t+=` AND ${L}=@A`),B=\"((\"+e+\") OR (\"+t+\"))\",B=$(B,\"@T\",F??\"\"),e=$(e,\"@T\",F??\"\"),null!==I&&(e=$(e,\"@A\",I.toString()),B=$(B,\"@A\",I.toString())),q.codefield=V.create(\"CASE WHEN \"+e+` THEN ${S} ELSE ${C} END`,y.associations.getFieldsIndex(),y.associations.dateFieldsTimeZoneDefaultUTC);const n=_(M.findField(y.associations.fields,A));n.name=W,n.alias=W,O=new j(n,V.create(\"CASE WHEN \"+e+` THEN ${A} ELSE ${E} END`,y.associations.getFieldsIndex(),y.associations.dateFieldsTimeZoneDefaultUTC));break}case\"container\":B=`${E}='${F}' AND ${v} = 2`,null!==I&&(B+=` AND ${x} = `+I.toString()),q.codefield=S,B=\"( \"+B+\" )\",O=new Z(M.findField(y.associations.fields,A),W,W);break;case\"content\":B=`(${A}='${F}' AND ${v} = 2)`,null!==I&&(B+=` AND ${L} = `+I.toString()),q.codefield=C,B=\"( \"+B+\" )\",O=new Z(M.findField(y.associations.fields,E),W,W);break;case\"structure\":B=`(${E}='${F}' AND ${v} = 3)`,null!==I&&(B+=` AND ${x} = `+I.toString()),q.codefield=S,B=\"( \"+B+\" )\",O=new Z(M.findField(y.associations.fields,A),W,G);break;case\"attached\":B=`(${A}='${F}' AND ${v} = 3)`,null!==I&&(B+=` AND ${L} = `+I.toString()),q.codefield=C,B=\"( \"+B+\" )\",O=new Z(M.findField(y.associations.fields,E),W,G);break;default:throw new a(e,i.InvalidParameter,t)}D&&(B=\"1 <> 1\");return new M({parentfeatureset:y.associations,adaptedFields:[new R(M.findField(y.associations.fields,k)),new R(M.findField(y.associations.fields,P)),O,H,q,z],extraFilter:B?V.create(B,y.associations.getFieldsIndex(),y.associations.dateFieldsTimeZoneDefaultUTC):null})}))},q.signatures.push({name:\"featuresetbyassociation\",min:2,max:6}),q.functions.groupby=function(e,t){return q.standardFunctionAsync(e,t,(async(r,s,o)=>{if(m(o,3,3,e,t),!w(o[0]))throw new a(e,i.InvalidParameter,t);const l=await o[0].load(),f=[],u=[];let d=!1,c=[];if(h(o[1]))c.push(o[1]);else if(o[1]instanceof n)c.push(o[1]);else if(A(o[1]))c=o[1];else{if(!x(o[1]))throw new a(e,i.InvalidParameter,t);c=o[1].toArray()}for(const m of c)if(h(m)){const e=V.create(g(m),l.getFieldsIndex(),l.dateFieldsTimeZoneDefaultUTC),t=!0===K(e)?g(m):\"%%%%FIELDNAME\";f.push({name:t,expression:e}),\"%%%%FIELDNAME\"===t&&(d=!0)}else{if(!(m instanceof n))throw new a(e,i.InvalidParameter,t);{const n=m.hasField(\"name\")?m.field(\"name\"):\"%%%%FIELDNAME\",r=m.hasField(\"expression\")?m.field(\"expression\"):\"\";if(\"%%%%FIELDNAME\"===n&&(d=!0),!n)throw new a(e,i.InvalidParameter,t);f.push({name:n,expression:V.create(r||n,l.getFieldsIndex(),l.dateFieldsTimeZoneDefaultUTC)})}}if(c=[],h(o[2]))c.push(o[2]);else if(A(o[2]))c=o[2];else if(x(o[2]))c=o[2].toArray();else{if(!(o[2]instanceof n))throw new a(e,i.InvalidParameter,t);c.push(o[2])}for(const m of c){if(!(m instanceof n))throw new a(e,i.InvalidParameter,t);{const n=m.hasField(\"name\")?m.field(\"name\"):\"\",r=m.hasField(\"statistic\")?m.field(\"statistic\"):\"\",s=m.hasField(\"expression\")?m.field(\"expression\"):\"\";if(!n||!r||!s)throw new a(e,i.InvalidParameter,t);u.push({name:n,statistic:r.toLowerCase(),expression:V.create(s,l.getFieldsIndex(),l.dateFieldsTimeZoneDefaultUTC)})}}if(d){const e={};for(const n of l.fields)e[n.name.toLowerCase()]=1;for(const n of f)\"%%%%FIELDNAME\"!==n.name&&(e[n.name.toLowerCase()]=1);for(const n of u)\"%%%%FIELDNAME\"!==n.name&&(e[n.name.toLowerCase()]=1);let t=0;for(const n of f)if(\"%%%%FIELDNAME\"===n.name){for(;1===e[\"field_\"+t.toString()];)t++;e[\"field_\"+t.toString()]=1,n.name=\"FIELD_\"+t.toString()}}for(const t of f)await ee(t.expression,q,e);for(const t of u)await ee(t.expression,q,e);return o[0].groupby(f,u)}))},q.signatures.push({name:\"groupby\",min:3,max:3}),q.functions.distinct=function(e,t){return q.standardFunctionAsync(e,t,(async(r,s,o)=>{if(w(o[0])){m(o,2,2,e,t);const r=await o[0].load(),s=[];let l=[];if(h(o[1]))l.push(o[1]);else if(o[1]instanceof n)l.push(o[1]);else if(A(o[1]))l=o[1];else{if(!x(o[1]))throw new a(e,i.InvalidParameter,t);l=o[1].toArray()}let f=!1;for(const o of l)if(h(o)){const e=V.create(g(o),r.getFieldsIndex(),r.dateFieldsTimeZoneDefaultUTC),t=!0===K(e)?g(o):\"%%%%FIELDNAME\";s.push({name:t,expression:e}),\"%%%%FIELDNAME\"===t&&(f=!0)}else{if(!(o instanceof n))throw new a(e,i.InvalidParameter,t);{const n=o.hasField(\"name\")?o.field(\"name\"):\"%%%%FIELDNAME\",l=o.hasField(\"expression\")?o.field(\"expression\"):\"\";if(\"%%%%FIELDNAME\"===n&&(f=!0),!n)throw new a(e,i.InvalidParameter,t);s.push({name:n,expression:V.create(l||n,r.getFieldsIndex(),r.dateFieldsTimeZoneDefaultUTC)})}}if(f){const e={};for(const n of r.fields)e[n.name.toLowerCase()]=1;for(const n of s)\"%%%%FIELDNAME\"!==n.name&&(e[n.name.toLowerCase()]=1);let t=0;for(const n of s)if(\"%%%%FIELDNAME\"===n.name){for(;1===e[\"field_\"+t.toString()];)t++;e[\"field_\"+t.toString()]=1,n.name=\"FIELD_\"+t.toString()}}for(const t of s)await ee(t.expression,q,e);return o[0].groupby(s,[])}return X(o)}))},q.functions.getfeaturesetinfo=function(e,t){return q.standardFunctionAsync(e,t,(async(a,i,r)=>{if(m(r,1,1,e,t),!w(r[0]))return null;const s=await r[0].getFeatureSetInfo();return s?n.convertObjectToArcadeDictionary({layerId:s.layerId,layerName:s.layerName,itemId:s.itemId,serviceLayerUrl:s.serviceLayerUrl,webMapLayerId:s.webMapLayerId??null,webMapLayerTitle:s.webMapLayerTitle??null,className:null,objectClassId:null},I(e),!1,!1):null}))},q.signatures.push({name:\"getfeaturesetinfo\",min:1,max:1}),q.functions.filterbysubtypecode=function(e,t){return q.standardFunctionAsync(e,t,(async(n,r,s)=>{if(m(s,2,2,e,t),w(s[0])){const n=await s[0].load(),r=s[1];if(!v(r))throw new a(e,i.InvalidParameter,t);if(n.subtypeField){const e=V.create(`${n.subtypeField}= ${s[1]}`,n.getFieldsIndex(),n.dateFieldsTimeZoneDefaultUTC);return new k({parentfeatureset:s[0],whereclause:e})}if(null===n.typeIdField||\"\"===n.typeIdField)throw new a(e,i.FeatureSetDoesNotHaveSubtypes,t);const o=V.create(`${n.typeIdField}= ${s[1]}`,n.getFieldsIndex(),n.dateFieldsTimeZoneDefaultUTC);return new k({parentfeatureset:s[0],whereclause:o})}throw new a(e,i.InvalidParameter,t)}))},q.signatures.push({name:\"filterbysubtypecode\",min:2,max:2}))}export{le as registerFunctions};\n"],"names":["X","e","A","q","x","ee","t","n","a","i","r","te","ne","ae","ie","s","o","re","se","oe","le","l","m","p","y","w","h","g","f","F","I","u","D","T","b","E","N","Y","P","d","c","W","L","B","V","k","G","O","z","S","C","Q","H","v","j","J","K","U","_","M","R","$","Z"],"mappings":"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","x_google_ignoreList":[0]}