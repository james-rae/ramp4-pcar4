{"version":3,"file":"drapedUtils-J1GkARd3.js","sources":["../../node_modules/@arcgis/core/renderers/support/clickToleranceUtils.js","../../node_modules/@arcgis/core/rest/operations/identify.js","../../node_modules/@arcgis/core/rest/support/IdentifyParameters.js","../../node_modules/@arcgis/core/rest/support/IdentifyResult.js","../../node_modules/@arcgis/core/rest/identify.js","../../node_modules/@arcgis/core/views/layers/support/MapServiceLayerViewHelper.js","../../node_modules/@arcgis/core/views/support/drapedUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nfunction t(t,e){return e?\"xoffset\"in e&&e.xoffset?Math.max(t,Math.abs(e.xoffset)):\"yoffset\"in e&&e.yoffset?Math.max(t,Math.abs(e.yoffset||0)):t:t}function e(t){let e=0,n=0;for(let r=0;r<t.length;r++){const o=t[r].size;\"number\"==typeof o&&(e+=o,n++)}return e/n}function n(t,n){return\"number\"==typeof t?t:t?.stops?.length?e(t.stops):n}function r(t,e){if(!e)return t;const r=e.filter((t=>\"size\"===t.type)).map((e=>{const{maxSize:r,minSize:o}=e;return(n(r,t)+n(o,t))/2}));let o=0;const s=r.length;if(0===s)return t;for(let n=0;n<s;n++)o+=r[n];const f=Math.floor(o/s);return Math.max(f,t)}function o(e){const n=e?.renderer,o=e?.pointerType,s=\"touch\"===o?9:6;if(!n)return s;const f=\"visualVariables\"in n?r(s,n.visualVariables):s;if(\"simple\"===n.type)return t(f,n.symbol);if(\"unique-value\"===n.type){let e=f;return n.uniqueValueInfos?.forEach((n=>{e=t(e,n.symbol)})),e}if(\"class-breaks\"===n.type){let e=f;return n.classBreakInfos.forEach((n=>{e=t(e,n.symbol)})),e}return\"dot-density\"===n.type||n.type,f}export{o as calculateTolerance};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport{sqlAnd as e}from\"../../core/sql.js\";import{getJsonType as t}from\"../../geometry/support/jsonUtils.js\";import{getScale as r}from\"../../geometry/support/scaleUtils.js\";import{srToRESTValue as i}from\"../../geometry/support/spatialReferenceUtils.js\";import{getLayerFloorFilterClause as n}from\"../../layers/support/floorFilterUtils.js\";import{isExportDynamic as s}from\"../../layers/support/sublayerUtils.js\";function o(e,r){const{dpi:n,gdbVersion:s,geometry:o,geometryPrecision:a,height:m,historicMoment:p,layerOption:f,mapExtent:y,maxAllowableOffset:u,returnFieldName:c,returnGeometry:d,returnUnformattedValues:g,returnZ:x,spatialReference:h,timeExtent:b,tolerance:E,width:O}=e.toJSON(),{dynamicLayers:S,layerDefs:j,layerIds:N}=l(e),$=null!=r?.geometry?r.geometry:null,I={historicMoment:p,geometryPrecision:a,maxAllowableOffset:u,returnFieldName:c,returnGeometry:d,returnUnformattedValues:g,returnZ:x,tolerance:E},R=$?.toJSON()||o;I.imageDisplay=`${O},${m},${n}`,s&&(I.gdbVersion=s),R&&(delete R.spatialReference,I.geometry=JSON.stringify(R),I.geometryType=t(R));const U=h??R?.spatialReference??y?.spatialReference;if(U&&(I.sr=i(U)),I.time=b?[b.start,b.end].join(\",\"):null,y){const{xmin:e,ymin:t,xmax:r,ymax:i}=y;I.mapExtent=`${e},${t},${r},${i}`}return j&&(I.layerDefs=j),S&&!j&&(I.dynamicLayers=S),I.layers=\"popup\"===f?\"visible\":f,N&&!S&&(I.layers+=`:${N.join(\",\")}`),I}function l(e){const{mapExtent:t,floors:i,width:o,sublayers:l,layerIds:m,layerOption:p,gdbVersion:f}=e,y=l?.find((e=>null!=e.layer))?.layer?.serviceSublayers,u=\"popup\"===p,c={},d=r({extent:t,width:o,spatialReference:t?.spatialReference}),g=[],x=e=>{const t=0===d,r=0===e.minScale||d<=e.minScale,i=0===e.maxScale||d>=e.maxScale;if(e.visible&&(t||r&&i))if(e.sublayers)e.sublayers.forEach(x);else{if(!1===m?.includes(e.id)||u&&(!e.popupTemplate||!e.popupEnabled))return;g.unshift(e)}};if(l?.forEach(x),l&&!g.length)c.layerIds=[];else{const e=s(g,y,f),t=g.map((e=>{const t=n(i,e);return e.toExportImageJSON(t)}));if(e)c.dynamicLayers=JSON.stringify(t);else{if(l){let e=g.map((({id:e})=>e));m&&(e=e.filter((e=>m.includes(e)))),c.layerIds=e}else m?.length&&(c.layerIds=m);const e=a(i,g);if(null!=e&&e.length){const t={};for(const r of e)r.definitionExpression&&(t[r.id]=r.definitionExpression);Object.keys(t).length&&(c.layerDefs=JSON.stringify(t))}}}return c}function a(t,r){const i=!!t?.length,s=r.filter((e=>null!=e.definitionExpression||i&&null!=e.floorInfo));return s.length?s.map((r=>{const i=n(t,r),s=e(i,r.definitionExpression);return{id:r.id,definitionExpression:s??void 0}})):null}export{o as identifyToIdentifyRESTParameters,l as toDynamicLayersJSON};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../chunks/tslib.es6.js\";import{geometryTypes as e}from\"../../geometry.js\";import o from\"../../TimeExtent.js\";import{JSONSupport as r}from\"../../core/JSONSupport.js\";import{property as i}from\"../../core/accessorSupport/decorators/property.js\";import{ensureClass as s}from\"../../core/accessorSupport/ensureType.js\";import\"../../core/RandomLCG.js\";import\"../../core/has.js\";import{subclass as p}from\"../../core/accessorSupport/decorators/subclass.js\";import{writer as n}from\"../../core/accessorSupport/decorators/writer.js\";import{fromJSON as l}from\"../../geometry/support/jsonUtils.js\";import m from\"../../geometry/Extent.js\";import y from\"../../geometry/SpatialReference.js\";var a;let u=a=class extends r{static from(t){return s(a,t)}constructor(t){super(t),this.dpi=96,this.floors=null,this.gdbVersion=null,this.geometry=null,this.geometryPrecision=null,this.height=400,this.historicMoment=null,this.layerIds=null,this.layerOption=\"top\",this.mapExtent=null,this.maxAllowableOffset=null,this.returnFieldName=!0,this.returnGeometry=!1,this.returnM=!1,this.returnUnformattedValues=!0,this.returnZ=!1,this.spatialReference=null,this.sublayers=null,this.timeExtent=null,this.tolerance=null,this.width=400}writeHistoricMoment(t,e){e.historicMoment=t&&t.getTime()}};t([i({type:Number,json:{write:!0}})],u.prototype,\"dpi\",void 0),t([i()],u.prototype,\"floors\",void 0),t([i({type:String,json:{write:!0}})],u.prototype,\"gdbVersion\",void 0),t([i({types:e,json:{read:l,write:!0}})],u.prototype,\"geometry\",void 0),t([i({type:Number,json:{write:!0}})],u.prototype,\"geometryPrecision\",void 0),t([i({type:Number,json:{write:!0}})],u.prototype,\"height\",void 0),t([i({type:Date})],u.prototype,\"historicMoment\",void 0),t([n(\"historicMoment\")],u.prototype,\"writeHistoricMoment\",null),t([i({type:[Number],json:{write:!0}})],u.prototype,\"layerIds\",void 0),t([i({type:[\"top\",\"visible\",\"all\",\"popup\"],json:{write:!0}})],u.prototype,\"layerOption\",void 0),t([i({type:m,json:{write:!0}})],u.prototype,\"mapExtent\",void 0),t([i({type:Number,json:{write:!0}})],u.prototype,\"maxAllowableOffset\",void 0),t([i({type:Boolean,json:{write:!0}})],u.prototype,\"returnFieldName\",void 0),t([i({type:Boolean,json:{write:!0}})],u.prototype,\"returnGeometry\",void 0),t([i({type:Boolean,json:{write:!0}})],u.prototype,\"returnM\",void 0),t([i({type:Boolean,json:{write:!0}})],u.prototype,\"returnUnformattedValues\",void 0),t([i({type:Boolean,json:{write:!0}})],u.prototype,\"returnZ\",void 0),t([i({type:y,json:{write:!0}})],u.prototype,\"spatialReference\",void 0),t([i()],u.prototype,\"sublayers\",void 0),t([i({type:o,json:{write:!0}})],u.prototype,\"timeExtent\",void 0),t([i({type:Number,json:{write:!0}})],u.prototype,\"tolerance\",void 0),t([i({type:Number,json:{write:!0}})],u.prototype,\"width\",void 0),u=a=t([p(\"esri.rest.support.IdentifyParameters\")],u);const d=u;export{d as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../chunks/tslib.es6.js\";import\"../../geometry.js\";import e from\"../../Graphic.js\";import{JSONSupport as t}from\"../../core/JSONSupport.js\";import{property as o}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/RandomLCG.js\";import{reader as s}from\"../../core/accessorSupport/decorators/reader.js\";import{subclass as p}from\"../../core/accessorSupport/decorators/subclass.js\";import{writer as i}from\"../../core/accessorSupport/decorators/writer.js\";import{typeKebabDictionary as a}from\"../../geometry/support/typeUtils.js\";let u=class extends t{constructor(r){super(r),this.displayFieldName=null,this.feature=null,this.layerId=null,this.layerName=null}readFeature(r,t){return e.fromJSON({attributes:{...t.attributes},geometry:{...t.geometry}})}writeFeature(r,e){if(!r)return;const{attributes:t,geometry:o}=r;t&&(e.attributes={...t}),null!=o&&(e.geometry=o.toJSON(),e.geometryType=a.toJSON(o.type))}};r([o({type:String,json:{write:!0}})],u.prototype,\"displayFieldName\",void 0),r([o({type:e})],u.prototype,\"feature\",void 0),r([s(\"feature\",[\"attributes\",\"geometry\"])],u.prototype,\"readFeature\",null),r([i(\"feature\")],u.prototype,\"writeFeature\",null),r([o({type:Number,json:{write:!0}})],u.prototype,\"layerId\",void 0),r([o({type:String,json:{write:!0}})],u.prototype,\"layerName\",void 0),u=r([p(\"esri.rest.support.IdentifyResult\")],u);const m=u;export{m as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport r from\"../request.js\";import{normalizeCentralMeridian as e}from\"../geometry/support/normalizeUtils.js\";import{parseUrl as t,encode as o,asValidOptions as s}from\"./utils.js\";import{identifyToIdentifyRESTParameters as n}from\"./operations/identify.js\";import u from\"./support/IdentifyParameters.js\";import i from\"./support/IdentifyResult.js\";async function f(u,i,f){const c=(i=a(i)).geometry?[i.geometry]:[],l=t(u);return l.path+=\"/identify\",e(c).then((e=>{const t=n(i,{geometry:e?.[0]}),u=o({...l.query,f:\"json\",...t}),a=s(u,f);return r(l.path,a).then(m).then((r=>p(r,i.sublayers)))}))}function m(r){const e=r.data;return e.results=e.results||[],e.exceededTransferLimit=Boolean(e.exceededTransferLimit),e.results=e.results.map((r=>i.fromJSON(r))),e}function a(r){return r=u.from(r)}function p(r,e){if(!e?.length)return r;const t=new Map;function o(r){t.set(r.id,r),r.sublayers&&r.sublayers.forEach(o)}e.forEach(o);for(const s of r.results)s.feature.sourceLayer=t.get(s.layerId);return r}export{f as identify};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import t from\"../../../Graphic.js\";import r from\"../../../core/Accessor.js\";import{isSome as s}from\"../../../core/arrayUtils.js\";import i from\"../../../core/Collection.js\";import o from\"../../../core/Error.js\";import{makeHandle as a}from\"../../../core/handleUtils.js\";import has from\"../../../core/has.js\";import{getOrCreateMapValue as n}from\"../../../core/MapUtils.js\";import{debounce as l,throwIfAborted as p}from\"../../../core/promiseUtils.js\";import{on as c}from\"../../../core/reactiveUtils.js\";import{sqlAnd as u}from\"../../../core/sql.js\";import{getMetersPerUnitForSR as h}from\"../../../core/unitUtils.js\";import{property as y}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/Logger.js\";import{subclass as m}from\"../../../core/accessorSupport/decorators/subclass.js\";import f from\"../../../geometry/Extent.js\";import{getResolutionForScale as d}from\"../../../geometry/support/scaleUtils.js\";import{collectFields as g}from\"../../../layers/support/fieldUtils.js\";import{getLayerFloorFilterClause as w}from\"../../../layers/support/floorFilterUtils.js\";import{calculateTolerance as b}from\"../../../renderers/support/clickToleranceUtils.js\";import{identify as v}from\"../../../rest/identify.js\";import j from\"../../../rest/support/IdentifyParameters.js\";import{loadArcade as x}from\"../../../support/arcadeOnDemand.js\";import F from\"../../../symbols/SimpleMarkerSymbol.js\";import{getRequiredFields as P,getFetchPopupTemplate as G}from\"./popupUtils.js\";let S=null;function U(e,t){return\"tile\"===t.type||\"map-image\"===t.type}let _=class extends r{constructor(e){super(e),this._featuresResolutions=new WeakMap,this.highlightGraphics=null,this.highlightGraphicUpdated=null,this.updateHighlightedFeatures=l((async e=>{this.destroyed||this.updatingHandles.addPromise(this._updateHighlightedFeaturesGeometries(e).catch((()=>{})))}))}initialize(){const e=e=>{this.updatingHandles.addPromise(this._updateHighlightedFeaturesSymbols(e).catch((()=>{}))),this.updateHighlightedFeatures(this._highlightGeometriesResolution)};this.addHandles([c((()=>this.highlightGraphics),\"change\",(t=>e(t.added)),{onListenerAdd:t=>e(t)})])}async fetchPopupFeaturesAtLocation(e,t){const{layerView:{layer:r,view:{scale:s}}}=this;if(!e)throw new o(\"fetchPopupFeatures:invalid-area\",\"Nothing to fetch without area\",{layer:r});const i=R(r.sublayers,s,t);if(!i.length)return[];const a=await T(r,i);if(!((r.capabilities?.operations?.supportsIdentify??!0)&&r.version>=10.5)&&!a)throw new o(\"fetchPopupFeatures:not-supported\",\"query operation is disabled for this service\",{layer:r});return a?this._fetchPopupFeaturesUsingQueries(e,i,t):this._fetchPopupFeaturesUsingIdentify(e,i,t)}clearHighlights(){this.highlightGraphics?.removeAll()}highlight(e){const r=this.highlightGraphics;if(!r)return a();let o=null;if(e instanceof t?o=[e]:i.isCollection(e)&&e.length>0?o=e.toArray():Array.isArray(e)&&e.length>0&&(o=e),o=o?.filter(s),!o?.length)return a();for(const t of o){const e=t.sourceLayer;null!=e&&\"geometryType\"in e&&\"point\"===e.geometryType&&(t.visible=!1)}return r.addMany(o),a((()=>r.removeMany(o??[])))}async _updateHighlightedFeaturesSymbols(e){const{layerView:{view:t},highlightGraphics:r,highlightGraphicUpdated:s}=this;if(r&&s)for(const i of e){const e=i.sourceLayer&&\"renderer\"in i.sourceLayer&&i.sourceLayer.renderer;i.sourceLayer&&\"geometryType\"in i.sourceLayer&&\"point\"===i.sourceLayer.geometryType&&e&&\"getSymbolAsync\"in e&&e.getSymbolAsync(i).then((async o=>{o||=new F;let a=null;const n=\"visualVariables\"in e?e.visualVariables?.find((e=>\"size\"===e.type)):void 0;n&&(S||(S=(await import(\"../../../renderers/visualVariables/support/visualVariableUtils.js\")).getSize),a=S(n,i,{view:t.type,scale:t.scale,shape:\"simple-marker\"===o.type?o.style:null})),a||=\"width\"in o&&\"height\"in o&&null!=o.width&&null!=o.height?Math.max(o.width,o.height):\"size\"in o?o.size:16,r.includes(i)&&(i.symbol=new F({style:\"square\",size:a,xoffset:\"xoffset\"in o?o.xoffset:0,yoffset:\"yoffset\"in o?o.yoffset:0}),s(i,\"symbol\"),i.visible=!0)}))}}async _updateHighlightedFeaturesGeometries(e){const{layerView:{layer:t,view:r},highlightGraphics:s,highlightGraphicUpdated:i}=this;if(this._highlightGeometriesResolution=e,!i||!s?.length||!t.capabilities.operations.supportsQuery)return;const o=this._getTargetResolution(e),a=new Map;for(const c of s)if(!this._featuresResolutions.has(c)||this._featuresResolutions.get(c)>o){const e=c.sourceLayer;n(a,e,(()=>new Map)).set(c.getObjectId(),c)}const l=Array.from(a,(([e,t])=>{const s=e.createQuery();return s.objectIds=[...t.keys()],s.outFields=[e.objectIdField],s.returnGeometry=!0,s.maxAllowableOffset=o,s.outSpatialReference=r.spatialReference,e.queryFeatures(s)})),p=await Promise.all(l);if(!this.destroyed)for(const{features:n}of p)for(const e of n){const t=e.sourceLayer,r=a.get(t).get(e.getObjectId());r&&s.includes(r)&&(r.geometry=e.geometry,i(r,\"geometry\"),this._featuresResolutions.set(r,o))}}_getTargetResolution(e){const t=e*h(this.layerView.view.spatialReference),r=t/16;return r<=10?0:e/t*r}async _fetchPopupFeaturesUsingIdentify(e,t,r){const s=await this._createIdentifyParameters(e,t,r);if(null==s)return[];const{results:i}=await v(this.layerView.layer.parsedUrl,s,r);return i.map((e=>e.feature))}async _createIdentifyParameters(e,t,r){const{floors:s,layer:i,timeExtent:o,view:{spatialReference:a,scale:n}}=this.layerView;if(!t.length)return null;await Promise.all(t.map((({sublayer:e})=>e.load(r).catch((()=>{})))));const l=Math.min(has(\"mapservice-popup-identify-max-tolerance\"),i.allSublayers.reduce(((e,t)=>t.renderer?b({renderer:t.renderer,pointerType:r?.pointerType}):e),2)),p=this.createFetchPopupFeaturesQueryGeometry(e,l),c=d(n,a),u=Math.round(p.width/c),h=new f({xmin:p.center.x-c*u,ymin:p.center.y-c*u,xmax:p.center.x+c*u,ymax:p.center.y+c*u,spatialReference:p.spatialReference});return new j({floors:s,gdbVersion:\"gdbVersion\"in i?i.gdbVersion:void 0,geometry:e,height:u,layerOption:\"popup\",mapExtent:h,returnGeometry:!0,spatialReference:a,sublayers:i.sublayers,timeExtent:o,tolerance:l,width:u})}async _fetchPopupFeaturesUsingQueries(e,t,r){const{layerView:{floors:i,timeExtent:o}}=this,a=t.map((async({sublayer:t,popupTemplate:s})=>{if(await t.load(r).catch((()=>{})),t.capabilities&&!t.capabilities.operations.supportsQuery)return[];const a=t.createQuery(),n=b({renderer:t.renderer,pointerType:r?.pointerType}),l=this.createFetchPopupFeaturesQueryGeometry(e,n),c=new Set,[h]=await Promise.all([P(t,s),t.renderer?.collectRequiredFields(c,t.fieldsIndex)]);p(r),g(c,t.fieldsIndex,h);const y=Array.from(c).sort();a.geometry=l,a.outFields=y,a.timeExtent=o;const m=w(i,t);a.where=u(a.where,m);const f=this._getTargetResolution(l.width/n),d=await A(s);p(r);const v=\"point\"===t.geometryType||d&&d.arcadeUtils.hasGeometryOperations(s);v||(a.maxAllowableOffset=f);let{features:j}=await t.queryFeatures(a,r);const x=v?0:f;j=await V(t,j,r);for(const e of j)this._featuresResolutions.set(e,x);return j}));return(await Promise.allSettled(a)).reduce(((e,t)=>\"fulfilled\"===t.status?[...e,...t.value]:e),[]).filter(s)}};function R(e,t,r){const s=[];if(!e)return s;const i=e=>{const o=0===e.minScale||t<=e.minScale,a=0===e.maxScale||t>=e.maxScale;if(e.visible&&o&&a)if(e.sublayers)e.sublayers.forEach(i);else if(e.popupEnabled){const t=G(e,{...r,defaultPopupTemplateEnabled:!1});null!=t&&s.unshift({sublayer:e,popupTemplate:t})}};return e.map(i),s}function A(e){return e.expressionInfos?.length||Array.isArray(e.content)&&e.content.some((e=>\"expression\"===e.type))?x():Promise.resolve()}async function T(e,t){if(e.capabilities?.operations?.supportsQuery)return!0;try{return await Promise.any(t.map((({sublayer:e})=>e.load().then((()=>e.capabilities.operations.supportsQuery)))))}catch{return!1}}async function V(e,t,r){const s=e.renderer;return s&&\"defaultSymbol\"in s&&!s.defaultSymbol&&(t=s.valueExpression?await Promise.all(t.map((e=>s.getSymbolAsync(e,r).then((t=>t?e:null))))).then((e=>e.filter((e=>null!=e)))):t.filter((e=>null!=s.getSymbol(e)))),t}e([y({constructOnly:!0})],_.prototype,\"createFetchPopupFeaturesQueryGeometry\",void 0),e([y({constructOnly:!0})],_.prototype,\"layerView\",void 0),e([y({constructOnly:!0})],_.prototype,\"highlightGraphics\",void 0),e([y({constructOnly:!0})],_.prototype,\"highlightGraphicUpdated\",void 0),e([y({constructOnly:!0})],_.prototype,\"updatingHandles\",void 0),_=e([m(\"esri.views.layers.support.MapServiceLayerViewHelper\")],_);export{_ as MapServiceLayerViewHelper,R as collectPopupProviders,U as isMapServiceLayerView};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport\"../../geometry.js\";import{getMetersPerUnitForSR as e}from\"../../core/unitUtils.js\";import{calculateTolerance as t}from\"../../renderers/support/clickToleranceUtils.js\";import n from\"../../geometry/Extent.js\";function r(t,r,i,a=new n){let o=0;if(\"2d\"===i.type)o=r*(i.resolution??0);else if(\"3d\"===i.type){const n=i.overlayPixelSizeInMapUnits(t),a=i.basemapSpatialReference;o=null==a||a.equals(i.spatialReference)?r*n:e(a)/e(i.spatialReference)}const s=t.x-o,l=t.y-o,m=t.x+o,p=t.y+o,{spatialReference:c}=i;return a.xmin=Math.min(s,m),a.ymin=Math.min(l,p),a.xmax=Math.max(s,m),a.ymax=Math.max(l,p),a.spatialReference=c,a}function i(e,n,i){const o=i.toMap(e);if(null==o)return!1;return r(o,t(),i,a).intersects(n)}const a=new n;export{r as createQueryGeometry,i as intersectsDrapedGeometry};\n"],"names":["t","e","n","r","o","s","f","a","m","p","y","u","c","d","g","x","h","E","O","S","N","l","$","I","R","U","i","_","T","F","v","has","b","j","P","w","A","V","G"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6]}