{"version":3,"file":"MeshWriterRegistry-ChAUVonf.js","sources":["../../node_modules/@arcgis/core/views/2d/engine/webgl/mesh/templates/segmentUtils.js","../../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/labels/LabelMeshWriter.js","../../node_modules/@arcgis/core/views/2d/layers/features/support/DictionaryValue.js","../../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/mesh/MeshWriterInputEvaluator.js","../../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/mesh/MeshWriterRegistry.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport{maxTileCoordValue as t}from\"../../../../../../symbols/cim/constants.js\";function e(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t}function n(t,e){return Math.sqrt(t*t+e*e)}function s(t){const e=n(t[0],t[1]);t[0]/=e,t[1]/=e}function i(t,e){return n(t[0]-e[0],t[1]-e[1])}function r(t,e){return t[e+1]}function h(t){return t.length-1}function a(t){let e=0;for(let n=0;n<h(t);n++)e+=c(t,n);return e}function c(t,e,n=1){let[s,i]=r(t,e);return[s,i]=[Math.round(s),Math.round(i)],Math.sqrt(s*s+i*i)*n}class u{constructor(t,e,n,s,i){this._segments=t,this._index=e,this._distance=n,this._xStart=s,this._yStart=i,this._done=!1}static create(t){return new u(t,0,0,t[0][0],t[0][1])}clone(){return new u(this._segments,this._index,this._distance,this.xStart,this.yStart)}equals(t){return this._index===t._index||t._index===this._index-1&&(0===this._distance||1===t._distance)||t._index===this._index+1&&(1===this._distance||0===t._distance)}leq(t){return this._index<t._index||this._index===t._index&&this._distance<=t._distance}geq(t){return this._index>t._index||this._index===t._index&&this._distance>=t._distance}get _segment(){return this._segments[this._index+1]}get angle(){const t=this.dy,e=(0*t+-1*-this.dx)/(1*this.length);let n=Math.acos(e);return t>0&&(n=2*Math.PI-n),n}get xStart(){return this._xStart}get yStart(){return this._yStart}get x(){return this.xStart+this.distance*this.dx}get y(){return this.yStart+this.distance*this.dy}get dx(){return this._segment[0]}get dy(){return this._segment[1]}get xMidpoint(){return this.xStart+.5*this.dx}get yMidpoint(){return this.yStart+.5*this.dy}get xEnd(){return this.xStart+this.dx}get yEnd(){return this.yStart+this.dy}get length(){const{dx:t,dy:e}=this;return Math.sqrt(t*t+e*e)}get remainingLength(){return this.length*(1-this._distance)}get backwardLength(){return this.length*this._distance}get distance(){return this._distance}get done(){return this._done}hasPrev(){return this._index-1>=0}hasNext(){return this._index+1<h(this._segments)}next(){return this.hasNext()?(this._xStart+=this.dx,this._yStart+=this.dy,this._distance=0,this._index+=1,this):null}prev(){return this.hasPrev()?(this._index-=1,this._xStart-=this.dx,this._yStart-=this.dy,this._distance=1,this):(this._done=!0,null)}_seekBackwards(t,e){const n=this.backwardLength;if(t<=n)return this._distance=(n-t)/this.length,this;let s=this.backwardLength;for(;this.prev();){if(s+this.length>t)return this._seekBackwards(t-s);s+=this.length}return this._distance=0,e?this:null}seek(t,e=!1){if(t<0)return this._seekBackwards(Math.abs(t),e);if(t<=this.remainingLength)return this._distance=(this.backwardLength+t)/this.length,this;let n=this.remainingLength;for(;this.next();){if(n+this.length>t)return this.seek(t-n,e);n+=this.length}return this._distance=1,e?this:null}}function d(e,n,s,i=!0){const r=a(e),h=u.create(e),c=r/2;if(!i)return h.seek(c),void(Math.abs(h.x)<t&&Math.abs(h.y)<t&&s(h.clone(),0,c+0*n,r));const d=Math.max((r-n)/2,0),o=Math.floor(d/n),_=c-o*n;h.seek(_);for(let a=-o;a<=o;a++)Math.abs(h.x)<t&&Math.abs(h.y)<t&&s(h.clone(),a,c+a*n,r),h.seek(n)}function o(t,e,n){_(n,e,a(t),u.create(t),0)}function _(t,e,n,s,i){if(n<e)return;const r=s.clone().seek(n/2);if(null==r)return;t(r.clone(),n,i),n=(n-e)/2;const h=r.seek(e/2);_(t,e,n,s,i+1),_(t,e,n,h,i+1)}function l(t,e){const n=e;for(let s=0;s<t.length;s++){let e=t[s];g(e,n);const i=[];i.push(e[0]);for(let t=1;t<e.length;t++){const[n,s]=e[t-1],[r,h]=e[t],a=r-n,c=h-s;i.push([a,c])}t[s]=i,e=i}return t}function g(t,n){const r=1e-6;if(n<=0)return;const h=t.length;if(h<3)return;const a=[];let c=0;a.push(0);for(let e=1;e<h;e++)c+=i(t[e],t[e-1]),a.push(c);n=Math.min(n,.2*c);const u=[];u.push(t[0][0]),u.push(t[0][1]);const d=t[h-1][0],o=t[h-1][1],_=e([0,0],t[0],t[1]);s(_),t[0][0]+=n*_[0],t[0][1]+=n*_[1],e(_,t[h-1],t[h-2]),s(_),t[h-1][0]+=n*_[0],t[h-1][1]+=n*_[1];for(let e=1;e<h;e++)a[e]+=n;a[h-1]+=n;const l=.5*n;for(let e=1;e<h-1;e++){let s=0,i=0,c=0;for(let h=e-1;h>=0&&!(a[h+1]<a[e]-l);h--){const u=l+a[h+1]-a[e],d=a[h+1]-a[h],o=a[e]-a[h]<l?1:u/d;if(Math.abs(o)<r)break;const _=o*o,g=o*u-.5*_*d,x=o*d/n,f=t[h+1],y=t[h][0]-f[0],k=t[h][1]-f[1];s+=x/g*(f[0]*o*u+.5*_*(u*y-d*f[0])-_*o*d*y/3),i+=x/g*(f[1]*o*u+.5*_*(u*k-d*f[1])-_*o*d*k/3),c+=x}for(let u=e+1;u<h&&!(a[u-1]>a[e]+l);u++){const h=l-a[u-1]+a[e],d=a[u]-a[u-1],o=a[u]-a[e]<l?1:h/d;if(Math.abs(o)<r)break;const _=o*o,g=o*h-.5*_*d,x=o*d/n,f=t[u-1],y=t[u][0]-f[0],k=t[u][1]-f[1];s+=x/g*(f[0]*o*h+.5*_*(h*y-d*f[0])-_*o*d*y/3),i+=x/g*(f[1]*o*h+.5*_*(h*k-d*f[1])-_*o*d*k/3),c+=x}u.push(s/c),u.push(i/c)}u.push(d),u.push(o);for(let e=0,s=0;e<h;e++)t[e][0]=u[s++],t[e][1]=u[s++]}export{u as SegmentCursor,d as pathDivide,a as pathLength,o as pathSubdivide,r as segmentAt,h as segmentCount,c as segmentLength,l as smoothPaths};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport{memoize as e}from\"../../../../../../../core/MapUtils.js\";import{pt2px as t}from\"../../../../../../../core/screenUtils.js\";import{fromRotation as i,translate as s}from\"../../../../../../../core/libs/gl-matrix-2/math/mat2d.js\";import{create as r}from\"../../../../../../../core/libs/gl-matrix-2/factories/mat2df32.js\";import{set as o,sub as n,normalize as a,add as l,scale as h}from\"../../../../../../../core/libs/gl-matrix-2/math/vec2.js\";import{fromValues as c}from\"../../../../../../../core/libs/gl-matrix-2/factories/vec2f32.js\";import{create as m}from\"../../../../../../../core/libs/gl-matrix-2/factories/vec2f64.js\";import{generalizeOptimizedGeometry as d,convertToGeometry as u}from\"../../../../../../../layers/graphics/featureConversionUtils.js\";import f from\"../../../../../../../layers/graphics/OptimizedGeometry.js\";import{getXAnchorDirection as g,getYAnchorDirection as p}from\"../../../alignmentUtils.js\";import{getDisplayIdTexel as _}from\"../../../DisplayId.js\";import x from\"../../../collisions/BoundingBox.js\";import{LabelMetric as y}from\"../../../collisions/LabelMetric.js\";import{smoothPaths as v,pathDivide as M}from\"../../../mesh/templates/segmentUtils.js\";import{getMinMaxZoom as P,processColorInput as b}from\"../fill/meshWriterUtils.js\";import{TextMeshWriter as w,maxLabelZoom as B}from\"../text/TextMeshWriter.js\";const L=1,S=0,I=128,A=e((e=>{let t=0;if(0===e)return 1/0;for(;!(e%2);)t++,e/=2;return t}));class z extends w{constructor(){super(...arguments),this._zoomLevel=0}_write(e,t,i,s){if(this._zoomLevel=s||0,null!=i)throw new Error(\"InternalError: EffectGeometry not support for LabelMeshWriter\");switch(t.geometryType){case\"esriGeometryPoint\":{const i=t.readXForDisplay(),s=t.readYForDisplay();return this._writePoint(e,i,s,t)}case\"esriGeometryEnvelope\":case\"esriGeometryPolygon\":case\"esriGeometryMultipoint\":{const i=t.readCentroidForDisplay();if(!i)return;const[s,r]=i.coords;return this._writePoint(e,s,r,t)}case\"esriGeometryPolyline\":this._writeLines(e,t)}}_writePoint(e,t,i,s){const r=this._getShaping();if(!r)return;let o=this._getPointReferenceBounds();o||(o={offsetX:0,offsetY:0,size:0});const n=r.boundsT,a=g(this.evaluatedMeshParams.horizontalAlignment),l=p(this.evaluatedMeshParams.verticalAlignment),h=this.evaluatedMeshParams.scaleInfo?.maxScale??0,c=this.evaluatedMeshParams.scaleInfo?.minScale??0,m=_(s.getDisplayId());e.metricStart(new y(m,t,i,a,l,h,c,o)),e.metricBoxWrite(n),this._writeGlyphs(e,s.getDisplayId(),t,i,r,0,o),e.metricEnd()}_getPointReferenceBounds(){if(!this._references)return null;for(const e of this._references){const t=e.getBoundsInfo();if(t)return t}return null}_writeLines(e,t){const{scaleInfo:i,verticalAlignment:s}=this.evaluatedMeshParams,r=this.evaluatedMeshParams.repeatLabelDistance||128,o=this._getShaping(\"middle\");if(!o)return;const n=(e,t,i,s)=>this._placeSubdivGlyphs(e,t,i,s),a=(o.bounds.width+r)/(1<<L);this._current={out:e,id:t.getDisplayId(),shaping:o,zoomRange:P(i,this.getTileInfo()),referenceBounds:this._getPointReferenceBounds()||{offsetX:0,offsetY:0,size:0},offsetDirection:null},this._verticalPlacement=\"bottom\"===s?\"above\":\"top\"===s?\"below\":null,this._verticalPlacement?this._writeAboveAndBelowAlong(t,n,a):this._writeCenterAlong(t,n,a)}_writeAboveAndBelowAlong(e,i,s){const{repeatLabel:r,fontSize:o}=this.evaluatedMeshParams,{shaping:n}=this._current,a=t(o),l=e.readGeometryForDisplay();if(!l)return;const h=new f;d(h,l,!1,!1,\"esriGeometryPolyline\",1);const c=D(new f,h,a),m=D(new f,h,-a),g=u(m,\"esriGeometryPolyline\",!1,!1),p=u(c,\"esriGeometryPolyline\",!1,!1),_=v(p.paths,n.bounds.width),x=v(g.paths,n.bounds.width);this._current.offsetDirection=\"above\";for(const t of _)M(t,s,i,!!r);this._current.offsetDirection=\"below\";for(const t of x)M(t,s,i,!!r)}_writeCenterAlong(e,t,i){const{repeatLabel:s}=this.evaluatedMeshParams,{shaping:r}=this._current,o=v(e.readLegacyGeometryForDisplay().paths,r.bounds.width);for(const n of o)M(n,i,t,!!s)}_placeSubdivGlyphs(e,t,i,s){const{allowOverrun:r,labelPosition:o,repeatLabelDistance:n}=this.evaluatedMeshParams,a=this._current.zoomRange[0],l=A(t),h=this._current.shaping.bounds.width/(1<<L),c=Math.sqrt(n||I)/(1<<L),m=Math.min(i,s-i),d=this._current.shaping.isMultiline?B:Math.log2(m/(c+h/2)),u=0===t?d:Math.min(l,d),f=Math.max(a,this._zoomLevel+L-u),g=this._zoomLevel-f,p=this._current.shaping.bounds.width/2*2**g;this._current.shaping.isMultiline?0===t&&this._placeStraight(e,f):r&&g<0?this._placeStraightAlong(e,a):\"parallel\"===o?this._placeStraightAlong(e,f):\"curved\"===o&&this._placeCurved(e,f,p)}_placeStraight(e,t){const{out:i,id:s,shaping:r,referenceBounds:o}=this._current,{x:n,y:a}=e,l=_(s),h=this.evaluatedMeshParams.scaleInfo?.maxScale??0,c=this.evaluatedMeshParams.scaleInfo?.minScale??0;i.metricStart(new y(l,e.x,e.y,0,0,h,c,null)),i.metricBoxWrite(r.boundsT);const m=e.angle*(180/Math.PI)%360,d=(e.angle*(180/Math.PI)+180)%360;this._writeGlyphs(i,s,n,a,r,0,o,{clipAngle:m,mapAligned:!0,isLineLabel:!0,minZoom:t}),this._writeGlyphs(i,s,n,a,r,0,o,{clipAngle:d,mapAligned:!0,isLineLabel:!0,minZoom:t}),i.metricEnd()}_placeCurved(e,t,i){const{out:s,id:r}=this._current,o=e.clone(),n=e.angle*(180/Math.PI)%360,a=(e.angle*(180/Math.PI)+180)%360,l=_(r),h=this.evaluatedMeshParams.scaleInfo?.maxScale??0,c=this.evaluatedMeshParams.scaleInfo?.minScale??0;s.metricStart(new y(l,e.x,e.y,0,0,h,c,null)),this._verticalPlacement&&this._verticalPlacement!==this._current.offsetDirection||(this._placeFirst(o,t,1,n),this._placeBack(e,o,t,i,1,n),this._placeForward(e,o,t,i,1,n)),this._verticalPlacement&&this._verticalPlacement===this._current.offsetDirection||(this._placeFirst(o,t,0,a),this._placeBack(e,o,t,i,0,a),this._placeForward(e,o,t,i,0,a)),s.metricEnd()}_placeStraightAlong(e,o){const{out:n,id:a,shaping:l,zoomRange:h,referenceBounds:m}=this._current,{boxBorderLineColor:d,boxBackgroundColor:u}=this.evaluatedMeshParams,f=e.clone(),g=e.angle*(180/Math.PI)%360,p=(e.angle*(180/Math.PI)+180)%360;if(l.glyphs.length>0&&!(!d&&!u)){const d=Math.max(o,h[0],0),u=Math.min(B,h[1]),f=i(r(),-e.angle),_={minZoom:d,maxZoom:u,clipAngle:g,mapAligned:!0,isLineLabel:!0},x=t(this.evaluatedMeshParams.offsetX),y=t(this.evaluatedMeshParams.offsetY);if(!this._verticalPlacement||this._verticalPlacement===this._current.offsetDirection){const t=c(x,-1*y),[i,o]=l.shapeBackground(s(r(),f,t));n.recordStart(this.instanceId,this.attributeLayout,l.glyphs[0].textureBinding);const h=2*Math.max(i.width,i.height);n.recordBounds(e.x+i.x,e.y+i.y,h,h),this._writeTextBox(n,a,e.x,e.y,o,m,_),n.recordEnd()}if(!this._verticalPlacement||this._verticalPlacement!==this._current.offsetDirection){const t=c(x,y),[i,o]=l.shapeBackground(s(r(),f,t));_.clipAngle=p,n.recordStart(this.instanceId,this.attributeLayout,l.glyphs[0].textureBinding);const h=2*Math.max(i.width,i.height);n.recordBounds(e.x+i.x,e.y+i.y,h,h),this._writeTextBox(n,a,e.x,e.y,o,m,_),n.recordEnd()}}const x=_(a),v=this.evaluatedMeshParams.scaleInfo?.maxScale??0,M=this.evaluatedMeshParams.scaleInfo?.minScale??0;n.metricStart(new y(x,e.x,e.y,0,0,v,M,null)),this._verticalPlacement&&this._verticalPlacement!==this._current.offsetDirection||this._placeFirst(f,o,1,g,!0),this._verticalPlacement&&this._verticalPlacement===this._current.offsetDirection||this._placeFirst(f,o,0,p,!0),n.metricEnd()}_placeBack(e,t,i,s,r,o){const n=e.clone();let a=e.backwardLength+S;for(;n.prev()&&!(a>=s);)this._placeOnSegment(n,t,a,i,-1,r,o),a+=n.length+S}_placeForward(e,t,i,s,r,o){const n=e.clone();let a=e.remainingLength+S;for(;n.next()&&!(a>=s);)this._placeOnSegment(n,t,a,i,1,r,o),a+=n.length+S}_placeFirst(e,t,i,s,r=!1){const{out:o,id:n,shaping:a,zoomRange:l,referenceBounds:h}=this._current,c=a.glyphs;for(const m of c){const c=m.x>a.bounds.x?i:1-i,d=c*e.remainingLength+(1-c)*e.backwardLength,u=Math.abs(m.x+m.width/2-a.bounds.x),f=Math.max(0,this._zoomLevel+Math.log2(u/(d+S))),g=Math.max(t,r?0:f);m.maxZoom=Math.min(l[1],B),m.angle=e.angle+(1-i)*Math.PI,m.minZoom=Math.max(l[0],g),this._writeLineGlyph(o,n,e.x,e.y,a.bounds,m,s,h,!0),i&&this._isVisible(m.minZoom,m.maxZoom)&&o.metricBoxWrite(m.bounds)}}_placeOnSegment(e,t,i,s,r,o,n){const{out:a,id:l,shaping:h,referenceBounds:c}=this._current,m=h.glyphs,d=e.dx/e.length,u=e.dy/e.length,f={x:e.x+i*-r*d,y:e.y+i*-r*u};for(const g of m){const m=g.x>h.bounds.x?o:1-o;if(!(m&&1===r||!m&&-1===r))continue;const d=Math.abs(g.x+g.width/2-h.bounds.x),u=Math.max(0,this._zoomLevel+Math.log2(d/i)-.1),p=Math.max(s,this._zoomLevel+Math.log2(d/(i+e.length+S)));if(0!==u&&(g.angle=e.angle+(1-o)*Math.PI,g.minZoom=p,g.maxZoom=u,this._writeLineGlyph(a,l,f.x,f.y,h.bounds,g,n,c,!0),o&&this._isVisible(g.minZoom,g.maxZoom))){const i=g.bounds,s=e.x-t.x,r=e.y-t.y,o=new x(i.center[0]+s,i.center[1]+r,i.width,i.height);a.metricBoxWrite(o)}}}_writeLineGlyph(e,t,i,s,r,o,n,a,l){const h=i+r.x,c=s+r.y,m=2*(this.evaluatedMeshParams.minPixelBuffer?this.evaluatedMeshParams.minPixelBuffer/this._textMeshTransformProps.fontSize:1),d=Math.max(r.width,r.height)*m;e.recordStart(this.instanceId,this.attributeLayout,o.textureBinding),e.recordBounds(h,c,d,d);const{texcoords:u,offsets:f}=o,g=this._textMeshTransformProps.fontSize;this._writeQuad(e,t,i,s,{texcoords:u,offsets:f,fontSize:g,color:b(this.evaluatedMeshParams.color),isBackground:!1,referenceBounds:a,minZoom:Math.max(this._current.zoomRange[0],o.minZoom),maxZoom:Math.min(this._current.zoomRange[1],o.maxZoom),clipAngle:n,mapAligned:l,isLineLabel:!0}),e.recordEnd()}_isVisible(e,t){const i=this._zoomLevel;return e<=i&&i<=t}}function D(e,t,i){const{coords:s,lengths:r}=t,c=m(),d=m(),u=m(),f=m(),g=m(),p=m(),_=2;let x=0;for(let m=0;m<r.length;m++){const t=r[m];for(let r=0;r<t;r++){const m=_*(r+x-1),y=_*(r+x),v=_*(r+x+1);r>0?o(c,s[m],s[m+1]):o(c,0,0),o(d,s[y],s[y+1]),r<t-1?o(u,s[v],s[v+1]):o(u,0,0),0===r?o(f,0,0):(n(f,d,c),a(f,f),o(f,f[1],-f[0])),r===t-1?o(g,0,0):(n(g,u,d),a(g,g),o(g,g[1],-g[0])),l(p,f,g),a(p,p);const M=p[0]*g[0]+p[1]*g[1];0!==M&&h(p,p,M),h(p,p,i),e.coords.push(d[0]+p[0],d[1]+p[1])}e.lengths.push(t),x+=t}return e}export{z as LabelMeshWriter};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport{AComputedField as e}from\"./AComputedField.js\";class r extends e{constructor(e){super(),this._value=e}resize(e){}read(e,r){return this._value}readWithDefault(e,r,t){return this._value}referencesScale(){return!1}referencesGeometry(){return!1}}export{r as DictionaryValue};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport{isSome as e}from\"../../../../../../../core/arrayUtils.js\";import r from\"../../../../../../../core/Error.js\";import{clone as t}from\"../../../../../../../core/lang.js\";import s from\"../../../../../../../core/Logger.js\";import{getStartGroup as a}from\"../../../grouping.js\";import{applyComputedValue as o}from\"./utils.js\";import{DictionaryValue as i}from\"../../../../../layers/features/support/DictionaryValue.js\";const n=()=>s.getLogger(\"esri.views.2d.engine.webgl.shaderGraph.techniques.mesh.MeshWriterInputEvaluator\");async function c(e,r,t=!1){const{defaultValue:s,valueExpressionInfo:a,value:o}=r;if(a){const{expression:o}=a,i=await e.createComputedField({expression:o},t);return i?{...r,computed:i,defaultValue:s}:null}return{...r,computed:new i(o),defaultValue:s}}async function m(e,r){const{defaultValue:t,valueExpressionInfo:s}=r,{expression:a}=s,o=await e.createComputedField({expression:a});return o?{...r,computed:o,defaultValue:t}:null}const p=e=>\"boolean\"!=typeof e&&\"number\"!=typeof e&&\"valueExpressionInfo\"in e,f=e=>e.some((e=>{for(const r in e){const t=e[r];if(p(t))return!0}return!1}));class l{static async create(r,t,s){const a={},o=new Map,i=new Map,n=new Map,u=new Map,d=new Map;for(const l in s){const h=s[l];if(null!=h&&\"object\"==typeof h)if(Array.isArray(h)){if(\"object\"==typeof h[0])throw new Error(`InternalError: Cannot handle ${l}. Nested array params are not supported`);a[l]=h}else if(\"valueExpressionInfo\"in h){if(h.value){a[l]=h.value;continue}const e=await m(r,h);if(!e){a[l]=h.defaultValue;continue}o.set(l,e),a[l]=null}else switch(h.type){case\"cim-effect-infos\":if(h.effectInfos.some((e=>e.overrides.length))){i.set(l,{effects:await Promise.all(h.effectInfos.map((async t=>{const s=t.overrides.map((e=>c(r,e)));return{effect:t.effect,compiledOverrides:(await Promise.all(s)).filter(e)}})))});break}a[l]=h.effectInfos.map((e=>e.effect));break;case\"cim-marker-placement-param\":h.overrides.length&&n.set(l,{placementInfo:h,compiledOverrides:(await Promise.all(h.overrides.map((e=>c(r,e))))).filter(e)}),a[l]=h.placement;break;case\"text-rasterization-param\":{if(h.overrides.length){const t=h.overrides.map((e=>c(r,e,h.useLegacyLabelEvaluationRules)));u.set(l,{compiledOverrides:(await Promise.all(t)).filter(e),rasterizationParam:h,objectIdToResourceId:new Map});continue}const s={type:\"cim-rasterization-info\",resource:h.resource};a[l]=await t.fetchResourceImmediate(s)??null;break}case\"sprite-rasterization-param\":{if(h.overrides.length){const t=h.overrides.map((e=>c(r,e)));u.set(l,{compiledOverrides:(await Promise.all(t)).filter(e),rasterizationParam:h,objectIdToResourceId:new Map});continue}if(\"animated\"===h.resource.type){u.set(l,{compiledOverrides:[],rasterizationParam:h,objectIdToResourceId:new Map});continue}const s={type:\"cim-rasterization-info\",resource:h.resource};a[l]=await t.fetchResourceImmediate(s)??null;break}case\"cim-marker-transform-param\":{const{params:e}=h;if(f(e)){const t={compiledMarkerInfos:[]};await Promise.all(e.map((async e=>{const s={props:{}};for(const t in e)if(p(e[t])){const a=await m(r,e[t]);s.compiledExpressionMap||(s.compiledExpressionMap=new Map);const o=s.compiledExpressionMap;a&&o.set(t,a)}else s.props[t]=e[t];t.compiledMarkerInfos.push(s)}))),d.set(l,t)}else a[l]={type:\"cim-marker-transform-info\",infos:e};break}default:a[l]=h}else a[l]=h}return new l(s,a,o,i,n,u,d)}constructor(e,r,t,s,a,o,i){this.inputMeshParams=e,this._resolvedMeshParams=r,this._dynamicProperties=t,this._dynamicEffectProperties=s,this._dynamicPlacementProperties=a,this._dynamicAsyncProperties=o,this._dynamicTransformProperties=i,this.evaluator=e=>e}get hasDynamicProperties(){return!!(this._dynamicProperties.size||this._dynamicAsyncProperties.size||this._dynamicEffectProperties.size||this._dynamicTransformProperties.size||this._dynamicPlacementProperties.size)}get evaluatedMeshParams(){return this._evaluatedMeshParams||(this._evaluatedMeshParams=this.evaluator(this._resolvedMeshParams)),this._evaluatedMeshParams}enqueueRequest(e,s,i){for(const m of this._dynamicAsyncProperties.values()){const p=t(m.rasterizationParam.resource);\"animated\"===m.rasterizationParam.resource.type&&m.rasterizationParam.resource.randomizeStartTime&&(p.primitiveName=\"__RESERVED__PRIMITIVE__NAME__\",p.startGroup=a(s.getObjectId()||0));for(const{primitiveName:e,propertyName:t,computed:a,defaultValue:l,valueExpressionInfo:u}of m.compiledOverrides)try{const r=\"animated\"===m.rasterizationParam.resource.type?p.primitiveName:e;o(p,r,t,a,s,i,l)}catch(c){n().errorOnce(new r(\"invalid-arcade-expression\",`Encountered an error when evaluating the arcade expression '${u?.expression}' (primitive: '${e}', property: '${t}')`,c))}const f=e.enqueueRequest({type:\"cim-rasterization-info\",resource:p});m.objectIdToResourceId.set(s.getObjectId(),f)}}evaluateMeshParams(e,r,t){for(const[s,a]of this._dynamicProperties.entries())this._resolvedMeshParams[s]=a.computed.readWithDefault(r,t,a.defaultValue);for(const[s,a]of this._dynamicPlacementProperties.entries())for(const{computed:e,defaultValue:o,propertyName:i}of a.compiledOverrides){const n=e.readWithDefault(r,t,o);a.placementInfo.placement[i]=n,this._resolvedMeshParams[s]=a.placementInfo.placement}for(const[s,a]of this._dynamicEffectProperties.entries())for(const e of a.effects){for(const{computed:s,defaultValue:a,propertyName:o}of e.compiledOverrides){const i=s.readWithDefault(r,t,a);e.effect[o]=i}this._resolvedMeshParams[s]=a.effects.map((e=>e.effect))}for(const[s,a]of this._dynamicTransformProperties.entries()){const e={type:\"cim-marker-transform-info\",infos:[]};for(const s of a.compiledMarkerInfos){const a={...s.props};if(s.compiledExpressionMap)for(const[e,o]of s.compiledExpressionMap){const s=o.computed.readWithDefault(r,t,o.defaultValue);a[e]=\"number\"==typeof s||\"boolean\"==typeof s?s:o.defaultValue}e.infos.push(a)}this._resolvedMeshParams[s]=e}for(const[s,a]of this._dynamicAsyncProperties.entries()){const t=a.objectIdToResourceId.get(r.getObjectId());if(null==t)continue;const o=e.getResource(t);this._resolvedMeshParams[s]=o}return this._evaluatedMeshParams=this.evaluator(this._resolvedMeshParams),this.evaluatedMeshParams}}export{l as MeshWriterInputEvaluator};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport{TechniqueType as e}from\"../TechniqueType.js\";import{DotDensityMeshWriter as r}from\"../dotDensity/DotDensityMeshWriter.js\";import{ComplexFillMeshWriter as t}from\"../fill/ComplexFillMeshWriter.js\";import{ComplexOutlineFillMeshWriter as i}from\"../fill/ComplexOutlineFillMeshWriter.js\";import{FillMeshWriter as s}from\"../fill/FillMeshWriter.js\";import{OutlineFillMeshWriter as l}from\"../fill/OutlineFillMeshWriter.js\";import{PatternFillMeshWriter as a}from\"../fill/PatternFillMeshWriter.js\";import{PatternOutlineFillMeshWriter as n}from\"../fill/PatternOutlineFillMeshWriter.js\";import{HeatmapMeshWriter as o}from\"../heatmap/HeatmapMeshWriter.js\";import{LabelMeshWriter as m}from\"../labels/LabelMeshWriter.js\";import{LineMeshWriter as p}from\"../line/LineMeshWriter.js\";import{TexturedLineMeshWriter as u}from\"../line/TexturedLineMeshWriter.js\";import{MarkerMeshWriter as h}from\"../markers/MarkerMeshWriter.js\";import{MeshWriterInputEvaluator as c}from\"./MeshWriterInputEvaluator.js\";import{PieChartMeshWriter as f}from\"../pieChart/PieChartMeshWriter.js\";import{TextMeshWriter as M}from\"../text/TextMeshWriter.js\";class W{async createMeshWriter(e,r,t,i){const s=this._getMeshWriter(i.techniqueType),l=await c.create(e,r,i.inputParams),a=new s(i.id,l,i.optionalAttributes,t);return await a.loadDependencies(),a}_getMeshWriter(c){switch(c){case e.Fill:return s;case e.DotDensity:return r;case e.ComplexFill:return t;case e.PatternFill:return a;case e.OutlineFill:return l;case e.PatternOutlineFill:return n;case e.ComplexOutlineFill:return i;case e.Marker:return h;case e.PieChart:return f;case e.Text:return M;case e.Line:return p;case e.TexturedLine:return u;case e.Heatmap:return o;case e.Label:return m;case e.Test:throw new Error(\"Internal Error: Found invalid mesh writer\")}}}export{W as MeshWriterRegistry};\n"],"names":["e","t","n","s","i","r","h","a","c","u","d","o","_","l","g","x","f","y","k","L","S","I","A","z","w","p","m","P","D","v","M","B","b","W"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4]}