{"version":3,"file":"MapServiceLayerViewHelper-DPxWME-_.js","sources":["../../node_modules/@arcgis/core/views/3d/layers/support/highlightUtils.js","../../node_modules/@arcgis/core/views/layers/support/MapServiceLayerViewHelper.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{C as r}from\"../../../../chunks/languageUtils.js\";import o from\"../../../../core/Collection.js\";import{makeHandle as t}from\"../../../../core/handleUtils.js\";function n(t){return e(t)||r(t)?[t]:o.isCollection(t)?t.toArray():Array.isArray(t)?t:i}function e(r){return\"number\"==typeof r||\"string\"==typeof r}const i=[],s=t();export{s as emptyHighlightHandle,e as isObjectId,n as normalizeHighlightTargetExceptQuery};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import{C as t}from\"../../../chunks/languageUtils.js\";import r from\"../../../core/Accessor.js\";import{isSome as s}from\"../../../core/arrayUtils.js\";import i from\"../../../core/Collection.js\";import o from\"../../../core/Error.js\";import{makeHandle as a}from\"../../../core/handleUtils.js\";import has from\"../../../core/has.js\";import{getOrCreateMapValue as n}from\"../../../core/MapUtils.js\";import{debounce as l,throwIfAborted as p}from\"../../../core/promiseUtils.js\";import{on as c}from\"../../../core/reactiveUtils.js\";import{sqlAnd as u}from\"../../../core/sql.js\";import{getMetersPerUnitForSR as h}from\"../../../core/unitUtils.js\";import{property as y}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/Logger.js\";import{subclass as m}from\"../../../core/accessorSupport/decorators/subclass.js\";import f from\"../../../geometry/Extent.js\";import{getResolutionForScale as d}from\"../../../geometry/support/scaleUtils.js\";import{collectFields as g}from\"../../../layers/support/fieldUtils.js\";import{getLayerFloorFilterClause as w}from\"../../../layers/support/floorFilterUtils.js\";import{calculateTolerance as b}from\"../../../renderers/support/clickToleranceUtils.js\";import{identify as j}from\"../../../rest/identify.js\";import v from\"../../../rest/support/IdentifyParameters.js\";import{loadArcade as x}from\"../../../support/arcadeOnDemand.js\";import F from\"../../../symbols/SimpleMarkerSymbol.js\";import{emptyHighlightHandle as U}from\"../../3d/layers/support/highlightUtils.js\";import{getRequiredFields as P,getFetchPopupTemplate as S}from\"./popupUtils.js\";let G=null;function _(e,t){return\"tile\"===t.type||\"map-image\"===t.type}let R=class extends r{constructor(e){super(e),this._featuresResolutions=new WeakMap,this.highlightGraphics=null,this.highlightGraphicUpdated=null,this.updateHighlightedFeatures=l((async e=>{this.destroyed||this.updatingHandles.addPromise(this._updateHighlightedFeaturesGeometries(e).catch((()=>{})))}))}initialize(){const e=e=>{this.updatingHandles.addPromise(this._updateHighlightedFeaturesSymbols(e).catch((()=>{}))),this.updateHighlightedFeatures(this._highlightGeometriesResolution)};this.addHandles([c((()=>this.highlightGraphics),\"change\",(t=>e(t.added)),{onListenerAdd:t=>e(t)})])}async fetchPopupFeaturesAtLocation(e,t){const{layerView:{layer:r,view:{scale:s}}}=this;if(!e)throw new o(\"fetchPopupFeatures:invalid-area\",\"Nothing to fetch without area\",{layer:r});const i=A(r.sublayers,s,t);if(!i.length)return[];const a=await V(r,i);if(!((r.capabilities?.operations?.supportsIdentify??!0)&&r.version>=10.5)&&!a)throw new o(\"fetchPopupFeatures:not-supported\",\"query operation is disabled for this service\",{layer:r});return a?this._fetchPopupFeaturesUsingQueries(e,i,t):this._fetchPopupFeaturesUsingIdentify(e,i,t)}clearHighlights(){this.highlightGraphics?.removeAll()}highlight(e){const r=this.highlightGraphics;if(!e||!r)return U;let o=t(e)?[e]:i.isCollection(e)?e.toArray():Array.isArray(e)?e:[];if(o=o?.filter(s),0===(o?.length??0))return U;for(const t of o){const{sourceLayer:e}=t;null!=e&&\"geometryType\"in e&&\"point\"===e.geometryType&&(t.visible=!1)}return r.addMany(o),a((()=>r.removeMany(o??[])))}async _updateHighlightedFeaturesSymbols(e){const{layerView:{view:t},highlightGraphics:r,highlightGraphicUpdated:s}=this;if(r&&s)for(const i of e){const e=i.sourceLayer&&\"renderer\"in i.sourceLayer&&i.sourceLayer.renderer;i.sourceLayer&&\"geometryType\"in i.sourceLayer&&\"point\"===i.sourceLayer.geometryType&&e&&\"getSymbolAsync\"in e&&e.getSymbolAsync(i).then((async o=>{o||=new F;let a=null;const n=\"visualVariables\"in e?e.visualVariables?.find((e=>\"size\"===e.type)):void 0;n&&(G||(G=(await import(\"../../../renderers/visualVariables/support/visualVariableUtils.js\")).getSize),a=G(n,i,{view:t.type,scale:t.scale,shape:\"simple-marker\"===o.type?o.style:null})),a||=\"width\"in o&&\"height\"in o&&null!=o.width&&null!=o.height?Math.max(o.width,o.height):\"size\"in o?o.size:16,r.includes(i)&&(i.symbol=new F({style:\"square\",size:a,xoffset:\"xoffset\"in o?o.xoffset:0,yoffset:\"yoffset\"in o?o.yoffset:0}),s(i,\"symbol\"),i.visible=!0)}))}}async _updateHighlightedFeaturesGeometries(e){const{layerView:{layer:t,view:r},highlightGraphics:s,highlightGraphicUpdated:i}=this;if(this._highlightGeometriesResolution=e,!i||!s?.length||!t.capabilities.operations.supportsQuery)return;const o=this._getTargetResolution(e),a=new Map;for(const c of s)if(!this._featuresResolutions.has(c)||this._featuresResolutions.get(c)>o){const e=c.sourceLayer;n(a,e,(()=>new Map)).set(c.getObjectId(),c)}const l=Array.from(a,(([e,t])=>{const s=e.createQuery();return s.objectIds=[...t.keys()],s.outFields=[e.objectIdField],s.returnGeometry=!0,s.maxAllowableOffset=o,s.outSpatialReference=r.spatialReference,e.queryFeatures(s)})),p=await Promise.all(l);if(!this.destroyed)for(const{features:n}of p)for(const e of n){const t=e.sourceLayer,r=a.get(t).get(e.getObjectId());r&&s.includes(r)&&(r.geometry=e.geometry,i(r,\"geometry\"),this._featuresResolutions.set(r,o))}}_getTargetResolution(e){const t=e*h(this.layerView.view.spatialReference),r=t/16;return r<=10?0:e/t*r}async _fetchPopupFeaturesUsingIdentify(e,t,r){const s=await this._createIdentifyParameters(e,t,r);if(null==s)return[];const{results:i}=await j(this.layerView.layer.parsedUrl,s,r);return i.map((e=>e.feature))}async _createIdentifyParameters(e,t,r){const{floors:s,layer:i,timeExtent:o,view:{spatialReference:a,scale:n}}=this.layerView;if(!t.length)return null;await Promise.all(t.map((({sublayer:e})=>e.load(r).catch((()=>{})))));const l=Math.min(has(\"mapservice-popup-identify-max-tolerance\"),i.allSublayers.reduce(((e,t)=>t.renderer?b({renderer:t.renderer,pointerType:r?.pointerType}):e),2)),p=this.createFetchPopupFeaturesQueryGeometry(e,l),c=d(n,a),u=Math.round(p.width/c),h=new f({xmin:p.center.x-c*u,ymin:p.center.y-c*u,xmax:p.center.x+c*u,ymax:p.center.y+c*u,spatialReference:p.spatialReference});return new v({floors:s,gdbVersion:\"gdbVersion\"in i?i.gdbVersion:void 0,geometry:e,height:u,layerOption:\"popup\",mapExtent:h,returnGeometry:!0,spatialReference:a,sublayers:i.sublayers,timeExtent:o,tolerance:l,width:u})}async _fetchPopupFeaturesUsingQueries(e,t,r){const{layerView:{floors:i,timeExtent:o}}=this,a=t.map((async({sublayer:t,popupTemplate:s})=>{if(await t.load(r).catch((()=>{})),t.capabilities&&!t.capabilities.operations.supportsQuery)return[];const a=t.createQuery(),n=b({renderer:t.renderer,pointerType:r?.pointerType}),l=this.createFetchPopupFeaturesQueryGeometry(e,n),c=new Set,[h]=await Promise.all([P(t,s),t.renderer?.collectRequiredFields(c,t.fieldsIndex)]);p(r),g(c,t.fieldsIndex,h);const y=Array.from(c).sort();a.geometry=l,a.outFields=y,a.timeExtent=o;const m=w(i,t);a.where=u(a.where,m);const f=this._getTargetResolution(l.width/n),d=await T(s);p(r);const j=\"point\"===t.geometryType||d&&d.arcadeUtils.hasGeometryOperations(s);j||(a.maxAllowableOffset=f);let{features:v}=await t.queryFeatures(a,r);const x=j?0:f;v=await I(t,v,r);for(const e of v)this._featuresResolutions.set(e,x);return v}));return(await Promise.allSettled(a)).reduce(((e,t)=>\"fulfilled\"===t.status?[...e,...t.value]:e),[]).filter(s)}};function A(e,t,r){const s=[];if(!e)return s;const i=e=>{const o=0===e.minScale||t<=e.minScale,a=0===e.maxScale||t>=e.maxScale;if(e.visible&&o&&a)if(e.sublayers)e.sublayers.forEach(i);else if(e.popupEnabled){const t=S(e,{...r,defaultPopupTemplateEnabled:!1});null!=t&&s.unshift({sublayer:e,popupTemplate:t})}};return e.map(i),s}function T(e){return e.expressionInfos?.length||Array.isArray(e.content)&&e.content.some((e=>\"expression\"===e.type))?x():Promise.resolve()}async function V(e,t){if(e.capabilities?.operations?.supportsQuery)return!0;try{return await Promise.any(t.map((({sublayer:e})=>e.load().then((()=>e.capabilities.operations.supportsQuery)))))}catch{return!1}}async function I(e,t,r){const s=e.renderer;return s&&\"defaultSymbol\"in s&&!s.defaultSymbol&&(t=s.valueExpression?await Promise.all(t.map((e=>s.getSymbolAsync(e,r).then((t=>t?e:null))))).then((e=>e.filter((e=>null!=e)))):t.filter((e=>null!=s.getSymbol(e)))),t}e([y({constructOnly:!0})],R.prototype,\"createFetchPopupFeaturesQueryGeometry\",void 0),e([y({constructOnly:!0})],R.prototype,\"layerView\",void 0),e([y({constructOnly:!0})],R.prototype,\"highlightGraphics\",void 0),e([y({constructOnly:!0})],R.prototype,\"highlightGraphicUpdated\",void 0),e([y({constructOnly:!0})],R.prototype,\"updatingHandles\",void 0),R=e([m(\"esri.views.layers.support.MapServiceLayerViewHelper\")],R);export{R as MapServiceLayerViewHelper,A as collectPopupProviders,_ as isMapServiceLayerView};\n"],"names":["s","t","G","_","e","R","r","l","c","o","i","A","V","U","a","F","n","p","h","j","has","b","d","u","f","v","P","g","y","w","T","x","I","S","m"],"mappings":"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","x_google_ignoreList":[0,1]}